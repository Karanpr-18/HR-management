<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Resume | TalentAI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modern-dashboard.css') }}">
    <style>
        .upload-zone {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 3rem 2rem;
            text-align: center;
            background: var(--darker-bg);
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-zone:hover {
            border-color: var(--primary-teal);
            background: rgba(20, 184, 166, 0.05);
        }

        .upload-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            color: var(--primary-teal);
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <a href="/" class="sidebar-logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="8" fill="url(#logo-gradient)" />
                    <path d="M16 8L20 12L16 16L12 12L16 8Z" fill="white" opacity="0.9" />
                    <path d="M16 16L20 20L16 24L12 20L16 16Z" fill="white" opacity="0.6" />
                    <defs>
                        <linearGradient id="logo-gradient" x1="0" y1="0" x2="32" y2="32">
                            <stop offset="0%" stop-color="#6366f1" />
                            <stop offset="100%" stop-color="#a855f7" />
                        </linearGradient>
                    </defs>
                </svg>
                <span class="brand-name">TalentAI</span>
            </a>

            <ul class="sidebar-nav">
                <li class="sidebar-nav-item">
                    <a href="/" class="sidebar-nav-link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                        Home
                    </a>
                </li>
                <li class="sidebar-nav-item">
                    <a href="/analyze" class="sidebar-nav-link active">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        Submit Resume
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="top-header">
                <h1 class="header-title">Upload Resume üìÑ</h1>
                <div class="header-actions">
                    <a href="/dashboard" class="btn-primary" style="background: rgba(255,255,255,0.1);">View
                        Dashboard</a>
                </div>
            </div>

            <div class="content-wrapper">
                <div style="max-width: 900px; margin: 0 auto;">
                    <form action="/process_analysis" method="POST" enctype="multipart/form-data" id="uploadForm">

                        <!-- PDF Upload Section -->
                        <div class="table-card" style="margin-bottom: 2rem;">
                            <div class="table-header">
                                <h2 class="table-title">üìé Upload PDF Resume(s)</h2>
                                <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                    Batch upload supported ‚Ä¢ Maximum 16MB total
                                </p>
                            </div>

                            <div style="padding: 2rem;">
                                <div class="upload-zone" onclick="document.getElementById('resume_files').click()">
                                    <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="17 8 12 3 7 8"></polyline>
                                        <line x1="12" y1="3" x2="12" y2="15"></line>
                                    </svg>
                                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Click to upload or
                                        drag & drop</h3>
                                    <p style="color: var(--text-secondary); font-size: 0.9rem;">PDF files only</p>
                                </div>
                                <input type="file" name="resume_files" id="resume_files" accept=".pdf" multiple
                                    style="display: none;">
                                <div id="fileList"
                                    style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;"></div>
                            </div>
                        </div>

                        <!-- OR Divider -->
                        <div style="text-align: center; margin: 2rem 0; color: var(--text-muted); font-weight: 600;">
                            ‚Äî OR ‚Äî
                        </div>

                        <!-- Text Input Section -->
                        <div class="table-card">
                            <div class="table-header">
                                <h2 class="table-title">‚úèÔ∏è Paste Resume Text</h2>
                            </div>

                            <div style="padding: 2rem;">
                                <textarea name="resume_text" id="resume_text" rows="12"
                                    placeholder="Paste candidate resume here..."
                                    style="width: 100%; background: var(--darker-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 1.25rem; color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; resize: vertical;"></textarea>
                            </div>
                        </div>

                        <!-- AI Toggle -->
                        <div class="table-card" style="margin-top: 2rem;">
                            <div
                                style="padding: 1.5rem; display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1rem;">
                                        ü§ñ Enable AI Analysis
                                    </h3>
                                    <p style="color: var(--text-secondary); font-size: 0.85rem;">
                                        Uses Groq Llama 3.1 for deeper, more accurate analysis
                                    </p>
                                </div>
                                <label style="position: relative; display: inline-block; width: 60px; height: 34px;">
                                    <input type="checkbox" id="use_ai" name="use_ai" checked
                                        style="opacity: 0; width: 0; height: 0;">
                                    <span
                                        style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--success); transition: .4s; border-radius: 34px;"></span>
                                    <span
                                        style="position: absolute; content: ''; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                                </label>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" id="analyzeBtn" class="btn-primary"
                            style="width: 100%; margin-top: 2rem; padding: 1.25rem; font-size: 1.1rem;">
                            üöÄ Analyze Resume & Save Results
                        </button>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script>
        // File input display
        document.getElementById('resume_files').addEventListener('change', function (e) {
            const fileList = document.getElementById('fileList');
            if (this.files.length > 0) {
                fileList.innerHTML = `<strong>Selected ${this.files.length} file(s):</strong><br>` +
                    Array.from(this.files).map(f => `‚Ä¢ ${f.name}`).join('<br>');
            } else {
                fileList.innerHTML = '';
            }
        });

        // Form submission
        document.getElementById('uploadForm').addEventListener('submit', function () {
            const btn = document.getElementById('analyzeBtn');
            btn.disabled = true;
            btn.innerHTML = '‚è≥ Processing...';
        });

        // Toggle switch styling
        const toggle = document.getElementById('use_ai');
        const slider = toggle.nextElementSibling;
        toggle.addEventListener('change', function () {
            if (this.checked) {
                slider.style.backgroundColor = 'var(--success)';
                slider.nextElementSibling.style.transform = 'translateX(26px)';
            } else {
                slider.style.backgroundColor = 'var(--text-muted)';
                slider.nextElementSibling.style.transform = 'translateX(0)';
            }
        });
    </script>
</body>

</html>